use LIVE_YOUR_ADVENTURE;

ALTER TABLE player 
  ADD PRIMARY KEY (id_player, username),
  ADD UNIQUE INDEX username_unique (username ASC) VISIBLE,
  ADD UNIQUE INDEX id_player_unique (id_player ASC) VISIBLE;
ALTER TABLE player 
  MODIFY id_player INT NOT NULL AUTO_INCREMENT,
  MODIFY password VARCHAR(45) NOT NULL,
  MODIFY username VARCHAR(45) NOT NULL,
  MODIFY user_creation VARCHAR(45) NULL DEFAULT NULL,
  MODIFY user_modification VARCHAR(45) NULL DEFAULT NULL,
  MODIFY date_creation DATETIME NULL DEFAULT NULL,
  MODIFY date_modification DATETIME NULL DEFAULT NULL;
  
ALTER TABLE adventure 
  ADD PRIMARY KEY (id_adventure),
  ADD UNIQUE INDEX id_adventure_unique (id_adventure ASC) VISIBLE;
ALTER TABLE adventure 
  MODIFY id_adventure INT NOT NULL AUTO_INCREMENT,
  MODIFY name VARCHAR(500) NOT NULL,
  MODIFY description VARCHAR(500) NOT NULL,
  MODIFY user_modification VARCHAR(45) NULL DEFAULT NULL,
  MODIFY user_creation VARCHAR(45) NULL DEFAULT NULL,
  MODIFY date_creation DATETIME NULL DEFAULT NULL,
  MODIFY date_modification DATETIME NULL DEFAULT NULL;
  
ALTER TABLE step 
  ADD PRIMARY KEY (id_step),
  ADD UNIQUE INDEX id_step_unique (id_step ASC) VISIBLE,
  ADD INDEX FK_STEP_ADVENTURE (id_adventure ASC) VISIBLE;
ALTER TABLE step 
  MODIFY id_step INT NOT NULL AUTO_INCREMENT,
  MODIFY description VARCHAR(500) NOT NULL,
  MODIFY end_step BIT(1) NULL DEFAULT NULL,
  MODIFY user_creation VARCHAR(45) NULL DEFAULT NULL,
  MODIFY user_modification VARCHAR(45) NULL DEFAULT NULL,
  MODIFY date_creation DATETIME NULL DEFAULT NULL,
  MODIFY date_modification DATETIME NULL DEFAULT NULL,
  MODIFY id_adventure INT NOT NULL;
ALTER TABLE step 
  ADD CONSTRAINT FK_STEP_ADVENTURE
  FOREIGN KEY (id_adventure)
  REFERENCES LIVE_YOUR_ADVENTURE.adventure (id_adventure);
    
ALTER TABLE LIVE_YOUR_ADVENTURE.option 
  ADD PRIMARY KEY (id_option),
  ADD UNIQUE INDEX id_option_unique (id_option ASC) VISIBLE,
  ADD INDEX FK_OPTION_STEP (id_last_step ASC) VISIBLE,
  ADD INDEX FK_OPTION_STEP2 (id_next_step ASC) VISIBLE;
ALTER TABLE LIVE_YOUR_ADVENTURE.option 
  MODIFY id_option INT NOT NULL AUTO_INCREMENT,
  MODIFY id_last_step INT NOT NULL,
  MODIFY id_next_step INT NOT NULL,
  MODIFY description VARCHAR(500) NOT NULL,
  MODIFY user_modification VARCHAR(45) NULL DEFAULT NULL,
  MODIFY user_creation VARCHAR(45) NULL DEFAULT NULL,
  MODIFY date_modification DATETIME NULL DEFAULT NULL,
  MODIFY date_creation DATETIME NULL DEFAULT NULL,
  MODIFY answer VARCHAR(500) NULL DEFAULT NULL;
ALTER TABLE LIVE_YOUR_ADVENTURE.option 
  ADD CONSTRAINT FK_OPTION_STEP
	FOREIGN KEY (id_last_step)
	REFERENCES LIVE_YOUR_ADVENTURE.step (id_step),
  ADD CONSTRAINT FK_OPTION_STEP2
    FOREIGN KEY (id_next_step)
    REFERENCES LIVE_YOUR_ADVENTURE.step (id_step);
    
ALTER TABLE LIVE_YOUR_ADVENTURE.character 
  ADD PRIMARY KEY (id_character),
  ADD UNIQUE INDEX id_character_unique (id_character ASC) VISIBLE;
ALTER TABLE LIVE_YOUR_ADVENTURE.character
  MODIFY id_character INT NOT NULL AUTO_INCREMENT,
  MODIFY name VARCHAR(45) NOT NULL,
  MODIFY description VARCHAR(500) NOT NULL,
  MODIFY user_creation VARCHAR(45) NULL DEFAULT NULL,
  MODIFY user_modification VARCHAR(45) NULL DEFAULT NULL,
  MODIFY date_creation DATETIME NULL DEFAULT NULL,
  MODIFY date_modification DATETIME NULL DEFAULT NULL;
  
ALTER TABLE game 
  ADD PRIMARY KEY (id_game),
  ADD UNIQUE INDEX id_game_unique (id_game ASC) VISIBLE,
  ADD INDEX player_idx (id_player ASC) VISIBLE,
  ADD INDEX character_idx (id_character ASC) VISIBLE,
  ADD INDEX FK_GAME_ADVENTURE_idx (id_adventure ASC) VISIBLE;
ALTER TABLE game 
  MODIFY id_game INT NOT NULL AUTO_INCREMENT,
  MODIFY date DATE NOT NULL,
  MODIFY user_creation VARCHAR(45) NULL DEFAULT NULL,
  MODIFY user_modification VARCHAR(45) NULL DEFAULT NULL,
  MODIFY date_creation DATETIME NULL DEFAULT NULL,
  MODIFY date_modification DATETIME NULL DEFAULT NULL,
  MODIFY id_adventure INT NOT NULL,
  MODIFY id_player INT NOT NULL,
  MODIFY id_character INT NOT NULL;
ALTER TABLE game
  ADD CONSTRAINT FK_GAME_ADVENTURE
    FOREIGN KEY (id_adventure)
    REFERENCES LIVE_YOUR_ADVENTURE.adventure (id_adventure),
  ADD CONSTRAINT FK_GAME_CHARACTER
    FOREIGN KEY (id_character)
    REFERENCES LIVE_YOUR_ADVENTURE.character (id_character),
  ADD CONSTRAINT FK_GAME_PLAYER
    FOREIGN KEY (id_player)
    REFERENCES LIVE_YOUR_ADVENTURE.player (id_player);
    
ALTER TABLE record 
  ADD PRIMARY KEY (id_record),
  ADD UNIQUE INDEX id_record_unique (id_record ASC) VISIBLE,
  ADD INDEX game_idx (id_game ASC) VISIBLE;
ALTER TABLE record
  MODIFY id_record INT NOT NULL AUTO_INCREMENT,
  MODIFY id_game INT NOT NULL,
  MODIFY id_option INT NOT NULL,
  MODIFY id_step INT NOT NULL,
  MODIFY date DATETIME NOT NULL,
  MODIFY date_creation DATETIME NULL DEFAULT NULL,
  MODIFY date_modification DATETIME NULL DEFAULT NULL,
  MODIFY user_creation VARCHAR(45) NULL DEFAULT NULL,
  MODIFY user_modification VARCHAR(45) NULL DEFAULT NULL;
ALTER TABLE record
  ADD CONSTRAINT FK_RECORD_GAME
    FOREIGN KEY (id_game)
    REFERENCES LIVE_YOUR_ADVENTURE.game (id_game),
  ADD CONSTRAINT FK_RECORD_OPTION
    FOREIGN KEY (id_option)
    REFERENCES LIVE_YOUR_ADVENTURE.option (id_option), 
  ADD CONSTRAINT FK_RECORD_STEP 
	FOREIGN KEY (id_step) 
    REFERENCES LIVE_YOUR_ADVENTURE.step (id_step);
    
ALTER TABLE adventure_character
  ADD PRIMARY KEY (id_character, id_adventure),
  ADD INDEX adventure_idx (id_adventure ASC) VISIBLE;
ALTER TABLE adventure_character
  MODIFY id_character INT NOT NULL AUTO_INCREMENT,
  MODIFY id_adventure INT NOT NULL;
ALTER TABLE adventure_character
  ADD CONSTRAINT FK_ADVENTURE_CHARACTER_ADVENTURE
    FOREIGN KEY (id_adventure)
    REFERENCES LIVE_YOUR_ADVENTURE.adventure (id_adventure),
  ADD CONSTRAINT FK_ADVENTURE_CHARACTER_CHARACTER
    FOREIGN KEY (id_character)
    REFERENCES LIVE_YOUR_ADVENTURE.character (id_character);
